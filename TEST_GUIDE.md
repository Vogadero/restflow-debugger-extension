# 测试指南

## 如何测试修复

### 准备工作
1. 在Chrome浏览器中加载扩展：
   - 打开 `chrome://extensions/`
   - 启用"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择 `api-debugger-extension` 文件夹

2. 打开任意网页，按F12打开开发者工具
3. 切换到"RestFlow"标签页

### 测试项目

#### 1. 测试复制请求功能（duplicateBtn）
**步骤**:
1. 在请求列表中选择任意一个请求
2. 点击右上角的"复制请求"按钮（双方块图标）
3. **预期结果**: 
   - 请求列表顶部出现一个新的复制请求
   - 显示成功提示"✅ 请求复制成功！"
   - 新请求自动被选中

#### 2. 测试复制icon功能
**步骤**:
1. 选择一个有完整数据的请求
2. 依次点击以下复制按钮：
   - 基本信息右侧的复制按钮
   - 请求头右侧的复制按钮
   - 请求体右侧的复制按钮（如果有）
   - 响应头右侧的复制按钮
   - 响应体右侧的复制按钮
3. **预期结果**: 
   - 每次点击都显示"✅ 已复制到剪贴板"
   - 可以粘贴到文本编辑器验证内容
   - 不再出现Clipboard API错误

#### 3. 测试折叠icon对齐
**步骤**:
1. 查看请求详情中的各个区域：
   - 基本信息
   - 请求头
   - 请求体
   - 响应头
   - 响应体
2. **预期结果**: 
   - 左侧的折叠箭头图标与右侧文字垂直居中对齐
   - 点击折叠/展开时动画流畅
   - 图标和文字之间间距合适

#### 4. 测试远程地址和引用站点策略
**步骤**:
1. 选择任意请求
2. 查看"基本信息"区域
3. **预期结果**: 
   - "远程地址"显示格式为 `hostname:port`（如 `api.example.com:443`）
   - "引用站点策略"显示具体策略（如 `strict-origin-when-cross-origin`），不再是N/A

#### 5. 测试响应体折叠树
**步骤**:
1. 选择一个有JSON响应体的请求
2. 在"响应体"区域，点击对象或数组前的箭头图标
3. 尝试展开多层嵌套结构
4. **预期结果**: 
   - 点击箭头可以正常展开/折叠
   - 箭头方向正确变化（右箭头→下箭头）
   - 子节点正确显示/隐藏
   - 可以展开任意深度的嵌套结构

#### 6. 测试下拉选择框
**步骤**:
1. 依次点击顶部的三个下拉框：
   - "所有方法"
   - "所有状态"
   - "所有类型"
2. 快速切换不同的下拉框
3. **预期结果**: 
   - 下拉菜单在正确位置显示
   - 不会向左下角漂移
   - 不会相互重叠覆盖
   - 选项清晰可见

#### 7. 测试模态框大小
**步骤**:
1. 点击顶部的"新建请求"按钮（+图标）
2. 点击顶部的"导入cURL"按钮（终端图标）
3. **预期结果**: 
   - 模态框足够大，内容不拥挤
   - 新建请求窗口宽度约800px
   - cURL导入窗口宽度约800px
   - 高度占屏幕90%左右
   - 所有内容清晰可见，无需过度滚动

#### 8. 测试刷新列表功能
**步骤**:
1. 确保请求列表中有一些请求
2. 点击请求列表右上角的刷新按钮（循环箭头图标）
3. **预期结果**: 
   - 按钮显示旋转动画
   - 当前页面重新加载（类似按F5）
   - 请求列表被清空
   - 请求数量显示为0
   - 显示"✅ 页面已重新加载"提示
   - 页面重新加载后，新的请求会重新被捕获

#### 9. 测试保存请求功能
**步骤**:
1. 点击"新建请求"
2. 填写方法、URL、请求头等信息
3. 点击"保存"按钮
4. **预期结果**: 
   - 模态框关闭
   - 新请求出现在列表顶部
   - 显示"✅ 请求已保存"提示
   - 可以选中并查看保存的请求

### 常见问题排查

**问题**: 复制功能不工作
- **解决**: 检查浏览器控制台是否有错误，尝试刷新扩展

**问题**: 刷新按钮没有重新加载页面
- **解决**: 确保manifest.json中有"tabs"权限，重新加载扩展

**问题**: JSON树无法展开
- **解决**: 检查响应体是否为有效JSON格式

**问题**: 下拉框仍然漂移
- **解决**: 清除浏览器缓存，强制刷新CSS

### 性能测试

1. **大量请求测试**:
   - 访问一个会产生100+请求的页面
   - 验证列表滚动流畅
   - 验证搜索和过滤功能正常

2. **大型JSON测试**:
   - 选择一个有大型JSON响应的请求
   - 测试展开/折叠性能
   - 验证不会卡顿

3. **快速操作测试**:
   - 快速切换不同请求
   - 快速点击各种按钮
   - 验证UI响应及时

## 回归测试

确保以下原有功能仍然正常：
- ✅ 请求自动捕获
- ✅ 搜索和过滤
- ✅ 请求重放
- ✅ 编辑请求
- ✅ 导出/导入数据
- ✅ cURL导入
- ✅ 代码生成器

## 报告问题

如果发现任何问题，请记录：
1. 问题描述
2. 重现步骤
3. 预期行为
4. 实际行为
5. 浏览器版本
6. 控制台错误信息（如有）
